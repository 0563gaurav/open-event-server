{% extends 'gentelella/admin/base.html' %}

{% set carousel_height = 500 if event.background_url else 300 -%}
{% set scrollspy_top = carousel_height + 95 %}

{% block head_css %}
    {{ super() }}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/public/details.css') }}"/>
    <style type="text/css">
        .carousel .item {
            height: {{ carousel_height }}px;
            background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('{{ event.background_url }}');
        }

        .carousel {
            height: {{ carousel_height }}px;
        }

    </style>
{% endblock %}
{% block title %}
    {{ event.name }}
{% endblock %}

{% macro social_link(name, domain, username) %}
    <i class="fa fa-facebook"></i> <a href="{{ domain + username }}">{{ username }}</a><br>
{% endmacro %}

{% macro speaker_info() %}
    <div class="col-md-3 speaker-info" style="text-align: center">
        <img src="https://randomuser.me/api/portraits/men/{{ range(1, 50) | random }}.jpg" style="width: 100%;"><br>
        <h4 style="font-weight: 500;">Firstname Lastname</h4>
        <h5 style="margin-top: 0;">Organisation</h5>
        <a href=""><i class="fa fa-facebook-square"></i></a> <a href=""><i class="fa fa-twitter-square"></i></a>
    </div>
{% endmacro %}

{% macro organizer_info() %}
    <div class="col-md-4 speaker-info" style="text-align: center">
        <img src="https://randomuser.me/api/portraits/men/{{ range(1, 50) | random }}.jpg" style="width: 100%;"><br>
        <h4 style="font-weight: 500;">Firstname Lastname</h4>
        <h5 style="margin-top: 0;">Organisation</h5>
        <a href=""><i class="fa fa-facebook-square"></i></a> <a href=""><i class="fa fa-twitter-square"></i></a>
    </div>
{% endmacro %}


{% block body %}
    <div class="scrollspy" id="scrollspy">
        <ul class="nav nav-pills nav-stacked" style="top: {{ scrollspy_top }}px;">
            <li role="presentation" class="active"><a href="#info">Info</a></li>
            <li role="presentation"><a href="#speakers">Speakers</a></li>
            <li role="presentation"><a href="#sponsors">Sponsors</a></li>
            <li role="presentation"><a href="#organizers">Organizers</a></li>
            <li role="presentation"><a href="#getting-here">Getting Here</a></li>
        </ul>
    </div>
    <span id="info" class="hidden-legend"> </span>
    <div class="carousel slide">
        <div class="carousel-inner">
            <div class="item active">
                <div class="container">
                    <div class="carousel-caption">
                        <h4>{{ event.start_time.strftime('%a, %B %d at %I:%M %p') | upper }}</h4>
                        <h1>{{ event.name }}</h1>
                        <h4><i class="glyphicon glyphicon-map-marker"></i> {{ event.location_name | upper }}</h4>
                        <p></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="event-info container">
        <div class="row">
            <div class="col-md-8">
                {{ event.description | safe }}
                <br>
                <br>
                <h3 id="speakers">Speakers</h3>

                <div class="row">
                    {{ speaker_info() }}
                    {{ speaker_info() }}
                    {{ speaker_info() }}
                    {{ speaker_info() }}
                </div>
                <div class="row">
                    {{ speaker_info() }}
                    {{ speaker_info() }}
                    {{ speaker_info() }}
                    {{ speaker_info() }}
                </div>
                <br>
                <h3 id="sponsors">Sponsors</h3>
                <div class="row">
                    <div class="col-sm-12">
                        <div class="col-md-4 col-sm-6 sponsor-column">
                            <div class="sponsor text-center">
                                <a href="https://developers.google.com/open-source/" target="default">
                                    <img alt="Sponsor" src="http://2016.fossasia.org/img/Google.png">
                                </a>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6 sponsor-column">
                            <div class="sponsor text-center">
                                <a href="http://www.unesco.org/new/en/communication-and-information/access-to-knowledge/free-and-open-source-software-foss/"
                                   target="default">
                                    <img alt="Sponsor" src="http://2016.fossasia.org/img/UNESCO.png">
                                </a>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6 sponsor-column">
                            <div class="sponsor text-center">
                                <a href="http://redhat.com" target="default">
                                    <img alt="Sponsor" src="http://2016.fossasia.org/img/RedHat.png">
                                </a>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6 sponsor-column">
                            <div class="sponsor text-center">
                                <a href="http://github.com" target="default">
                                    <img alt="Sponsor" src="http://2016.fossasia.org/img/GitHub_Logo.png">
                                </a>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6 sponsor-column">
                            <div class="sponsor text-center">
                                <a href="http://www.youthmobile.org/" target="default">
                                    <img alt="Sponsor" src="http://2016.fossasia.org/img/YouthMobileUnesco.png">
                                </a>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6 sponsor-column">
                            <div class="sponsor text-center">
                                <a href="http://www.science.edu.sg/" target="default">
                                    <img alt="Sponsor" src="http://2016.fossasia.org/img/ScienceCentre.png">
                                </a>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6 sponsor-column">
                            <div class="sponsor text-center">
                                <a href="http://oracle.com" target="default">
                                    <img alt="Sponsor" src="http://2016.fossasia.org/img/Oracle.png">
                                </a>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6 sponsor-column">
                            <div class="sponsor text-center">
                                <a href="http://mysql.com" target="default">
                                    <img alt="Sponsor" src="http://2016.fossasia.org/img/MySQL.png">
                                </a>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6 sponsor-column">
                            <div class="sponsor text-center">
                                <a href="https://www.hpe.com" target="default">
                                    <img alt="Sponsor" src="http://2016.fossasia.org/img/HPE.png">
                                </a>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6 sponsor-column">
                            <div class="sponsor text-center">
                                <a href="https://generalassemb.ly" target="default">
                                    <img alt="General Assembly" src="http://2016.fossasia.org/img/GeneralAssembly.png">
                                </a>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6 sponsor-column">
                            <div class="sponsor text-center">
                                <a href="http://mbm.asia" target="default">
                                    <img alt="Sponsor" src="http://2016.fossasia.org/img/mbm_logo.png">
                                </a>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6 sponsor-column">
                            <div class="sponsor text-center">
                                <a href="https://gandi.net" target="default">
                                    <img alt="gandi.net" src="http://2016.fossasia.org/img/gandinet.jpg">
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <br>
                <h3 id="organizers">Organizers</h3>
                <div class="row">
                    {{ organizer_info() }}
                    {{ organizer_info() }}
                    {{ organizer_info() }}
                </div>
                <div class="row">
                    {{ organizer_info() }}
                    {{ organizer_info() }}
                    {{ organizer_info() }}
                </div>
                <br>
                <h3 id="getting-here">Getting Here</h3>
                <div class="row">
                    <div id="map"
                         class="col-md-8 {% if event.latitude == 0 or event.longitude ==0 %}hidden{% endif %}"></div>
                    <div class="col-md-4" style="text-align: left;">
                        <h4>Address</h4>
                        Science Center Singapore
                        15 Science Centre Rd
                        609081 Singapore
                    </div>
                </div>
            </div>
            <div class="col-md-4">

                <i class="fa fa-envelope fa-fw"></i> contact@fossasia.org<br>
                <i class="fa fa-phone-square fa-fw"></i> +65 83435672
                <br>
                <br>
                {% set twitter = [] %}
                {% for social_link in event.social_link %}
                    {% set social_name = social_link.name.strip().lower() %}
                    {% if social_name == "twitter" %}
                        {% do twitter.append(social_link.link.strip()) %}
                        <i class="fa fa-twitter-square fa-fw" style="color: #55acee"></i>
                        <a class="social-link" href="{{ social_link.link }}">Twitter</a><br>
                    {% elif social_name == "facebook" %}
                        <i class="fa fa-facebook-square fa-fw" style="color: #3b5999"></i>
                        <a class="social-link" href="{{ social_link.link }}">Facebook</a><br>
                    {% elif social_name == "google plus" %}
                        <i class="fa fa-google-plus-square fa-fw" style="color: #dd4b39"></i>
                        <a class="social-link" href="{{ social_link.link }}">Google +</a><br>
                    {% endif %}
                {% endfor %}
                {% for twitterLink in twitter %}
                    <a class="twitter-timeline" href="{{ twitterLink }}" data-height="500">Tweets</a>
                {% endfor %}
                <p>

                </p>
            </div>
        </div>
    </div>
{% endblock %}

{% block tail_js %}
    {{ super() }}
    <script src="https://cdn.rawgit.com/leafo/sticky-kit/v1.1.2/jquery.sticky-kit.min.js"></script>
    <script type="text/javascript">
        var map;
        var eventLocation = {lat: {{ event.latitude }}, lng: {{ event.longitude }}};
        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                center: eventLocation,
                zoom: 16
            });

            var marker = new google.maps.Marker({
                position: eventLocation,
                map: map,
                title: "{{ event.name }}"
            });

            var infoWindow = new google.maps.InfoWindow({
                content: "<h5>{{ event.name }}</h5>{{ event.location_name }}"
            });

            marker.addListener('click', function () {
                infoWindow.open(map, marker);
            });
        }

        var $scrollSpy = $('#scrollspy');
        $scrollSpy.stick_in_parent({
            offset_top: 20
        });

        $('body').scrollspy({target: '.scrollspy'})

    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAHdXg0Y_zk-wCNpslbBqcezLdHniaEwkI&callback=initMap"
            async defer></script>
    <script>!function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https';
        if (!d.getElementById(id)) {
            js = d.createElement(s);
            js.id = id;
            js.src = p + "://platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js, fjs);
        }
    }(document, "script", "twitter-wjs");</script>
{% endblock %}
